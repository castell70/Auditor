<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <title>AuditorMonitor</title>
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />

  <link rel="stylesheet" href="./styles.css" />

  <script type="importmap">
  {
    "imports": {
      "lit": "https://esm.sh/lit@3.1.0",
      "jspdf": "https://esm.sh/jspdf@2.5.1",
      "html2canvas": "https://esm.sh/html2canvas@1.4.1"
    }
  }
  </script>
  <script type="module" src="./main.js"></script>
</head>
<body>
  <header class="top-bar">
    <div class="top-bar-left">AuditorMonitor</div>
    <div class="top-bar-right top-bar-blink">Powered by ITCPO</div>
  </header>

  <main class="app-shell">
    <section class="tab-bar">
      <button class="tab-button active" data-tab="auditoria">Auditor칤a</button>
      <button class="tab-button" data-tab="participantes">Participantes</button>
      <button class="tab-button" data-tab="etapas">Etapas</button>
      <button class="tab-button" data-tab="calendario">Calendario</button>
      <button class="tab-button" data-tab="diagrama">Diagrama</button>
      <button id="help-button" class="tab-button tab-button-help" data-tab="ayuda" title="Ayuda">?</button>
    </section>

    <section class="tab-content active" id="tab-auditoria">
      <div class="card">
        <div class="card-section">
          <label class="field-label">C칩digo de auditor칤a</label>
          <div class="field-row">
            <input id="audit-code" class="field-input" type="text" placeholder="Ej. AUD-2025-01" />
          </div>
          <div class="field-row">
            <select id="audit-selector" class="field-input">
              <option value="">Nueva auditor칤a</option>
            </select>
            <button id="save-audit" class="btn-primary">Guardar / actualizar</button>
          </div>
        </div>

        <div class="card-section">
          <label class="field-label">Nombre de auditor칤a</label>
          <input id="audit-name" class="field-input" type="text" placeholder="Ej. Auditor칤a financiera 2025" />
        </div>
        <div class="card-section">
          <label class="field-label">Auditor l칤der</label>
          <select id="lead-auditor" class="field-input"></select>
        </div>

        <div class="card-section">
          <div class="field-row">
            <button id="download-json" class="btn-chip">Descargar JSON</button>
            <button id="load-sample" class="btn-chip">Cargar ejemplo</button>
            <button id="load-json" class="btn-chip" title="Cargar datos desde archivo JSON">Cargar JSON</button>
            <button id="reset-app" class="btn-danger" title="Reiniciar la aplicaci칩n y eliminar todos los datos">Reiniciar</button>
          </div>
        </div>
      </div>

      <div class="card compact">
        <div class="card-header-row">
          <span class="card-title">Resumen</span>
          <span class="pill" id="audit-status-pill">Borrador</span>
        </div>
        <div class="summary-row">
          <div class="summary-item">
            <span class="summary-label">Participantes</span>
            <span class="summary-value" id="summary-participants">0</span>
          </div>
          <div class="summary-item">
            <span class="summary-label">Etapas</span>
            <span class="summary-value" id="summary-stages">0</span>
          </div>
          <div class="summary-item">
            <span class="summary-label">Actividades</span>
            <span class="summary-value" id="summary-tasks">0</span>
          </div>
          <div class="summary-item">
            <span class="summary-label">D칤as del proyecto</span>
            <span class="summary-value" id="summary-days">0</span>
          </div>
        </div>
      </div>
    </section>

    <section class="tab-content" id="tab-participantes">
      <div class="card scroll-card">
        <div class="card-section">
          <label class="field-label">Nuevo participante</label>
          <div class="field-row participant-row">
            <input id="participant-name" class="field-input" type="text" placeholder="Nombre" />
            <input id="participant-email" class="field-input" type="email" placeholder="Correo (opcional)" />
          </div>
          <div class="field-row">
            <div style="display:flex;gap:6px;align-items:center;width:100%;">
              <select id="participant-role" class="field-input"></select>
              <button id="manage-roles" class="btn-chip" title="Gestionar roles">Editar roles</button>
              <button id="add-participant" class="btn-primary">Agregar</button>
            </div>
          </div>
        </div>

        <div class="divider"></div>

        <div class="card-section list-section">
          <ul id="participants-list" class="list"></ul>
        </div>
      </div>
    </section>

    <section class="tab-content" id="tab-etapas">
      <div class="card scroll-card">
        <div class="card-section">
          <label class="field-label">Nueva etapa / documento</label>
          <div class="field-row">
            <input id="stage-name" class="field-input" type="text" placeholder="Nombre del documento / etapa" />
          </div>
          <div class="field-row">
            <select id="stage-risk" class="field-input">
              <option value="bajo">Riesgo bajo</option>
              <option value="medio">Riesgo medio</option>
              <option value="alto">Riesgo alto</option>
            </select>
          </div>
          <div class="field-row">
            <input
              id="stage-files"
              class="field-input"
              type="file"
              multiple
              accept=".doc,.docx,.pdf,.xls,.xlsx"
            />
            <button id="add-stage" class="btn-primary">Agregar</button>
          </div>
        </div>

        <div class="divider"></div>

        <div class="card-section list-section">
          <ul id="stages-list" class="list"></ul>
        </div>
      </div>
    </section>

    <section class="tab-content" id="tab-calendario">
      <div class="card scroll-card">
        <div class="card-section">
          <div class="card-header-row">
            <span class="card-title">Programaci칩n por etapas</span>
          </div>
        </div>
        <div class="divider"></div>
        <div class="card-section list-section">
          <ul id="calendar-list" class="list calendar-grid"></ul>
        </div>
      </div>
    </section>

    <section class="tab-content" id="tab-diagrama">
      <div class="card scroll-card">
        <div class="card-section">
          <div class="card-header-row">
            <span class="card-title">Diagrama de Gantt</span>
            <button id="gantt-pdf-btn" class="btn-chip" title="Descargar informe completo en PDF">Descargar Informe en PDF</button>
          </div>
        </div>
        <div class="divider"></div>
        <div class="card-section">
          <div id="gantt-container" class="gantt-container"></div>
        </div>
      </div>
    </section>

    <section class="tab-content" id="tab-ayuda">
      <div class="card scroll-card help-card">
        <div class="help-container">
          <!-- 칈ndice fijo a la izquierda -->
          <div class="help-toc-fixed">
            <div class="help-toc-title">游늶 Temas</div>
            <ul class="help-toc-list">
              <li><a href="javascript:void(0)" data-topic="help-about" class="help-toc-link">쯈u칠 es?</a></li>
              <li><a href="javascript:void(0)" data-topic="help-auditoria" class="help-toc-link">游늶 Auditor칤a</a></li>
              <li><a href="javascript:void(0)" data-topic="help-participantes" class="help-toc-link">游논 Participantes</a></li>
              <li><a href="javascript:void(0)" data-topic="help-etapas" class="help-toc-link">游늯 Etapas</a></li>
              <li><a href="javascript:void(0)" data-topic="help-calendario" class="help-toc-link">游늰 Calendario</a></li>
              <li><a href="javascript:void(0)" data-topic="help-diagrama" class="help-toc-link">游늵 Diagrama</a></li>
              <li><a href="javascript:void(0)" data-topic="help-example" class="help-toc-link">Ejemplo</a></li>
              <li><a href="javascript:void(0)" data-topic="help-tips" class="help-toc-link">Consejos</a></li>
            </ul>
          </div>
          
          <!-- Contenido scrollable a la derecha -->
          <div class="help-content">
            <!-- 쯈u칠 es? -->
            <div class="help-section active" id="help-about">
              <h2 style="margin: 0 0 12px 0; color: var(--orange); font-size: 16px;">AuditorMonitor</h2>
              <p style="margin: 0 0 10px 0; font-size: 12px; line-height: 1.5;">AuditorMonitor es una plataforma integral dise침ada para planificar, organizar, monitorear y documentar auditor칤as de forma eficiente. Permite a los equipos de auditor칤a centralizar toda la informaci칩n del proceso, desde la definici칩n del alcance hasta la presentaci칩n de resultados.</p>
              
              <h4 style="margin: 12px 0 8px 0; color: var(--text-main); font-size: 12px; font-weight: 600;">Caracter칤sticas principales:</h4>
              <ul style="margin: 0; padding-left: 16px; font-size: 11px; line-height: 1.5;">
                <li>Gesti칩n centralizada de auditor칤as m칰ltiples</li>
                <li>Registro y seguimiento de participantes con roles definibles</li>
                <li>Creaci칩n de etapas y actividades con clasificaci칩n de riesgos</li>
                <li>Calendario interactivo para programaci칩n de fechas</li>
                <li>Diagrama de Gantt visual para monitoreo del cronograma</li>
                <li>Exportaci칩n de reportes en PDF con informaci칩n completa</li>
                <li>Importaci칩n/exportaci칩n de datos en formato JSON para respaldos</li>
              </ul>
            </div>

            <!-- Secci칩n Auditor칤a -->
            <div class="help-section" id="help-auditoria">
              <h2 style="margin: 0 0 12px 0; color: var(--orange); font-size: 15px;">游늶 Auditor칤a</h2>
              <p style="margin: 0 0 10px 0; font-size: 12px; line-height: 1.5;">Esta es la secci칩n principal donde defines los par치metros generales de la auditor칤a. Aqu칤 estableces la identidad de tu auditor칤a, asignas el liderazgo y gestionas m칰ltiples auditor칤as simult치neamente.</p>
              
              <h4 style="margin: 12px 0 8px 0; color: var(--text-main); font-size: 12px; font-weight: 600;">Campos principales:</h4>
              
              <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-bottom: 12px;">
                <div style="background: #fafafa; border-radius: 8px; padding: 10px; font-size: 11px; line-height: 1.5;">
                  <p style="margin: 0 0 6px 0; font-weight: 600;">C칩digo de auditor칤a</p>
                  <p style="margin: 0; color: var(--text-muted);">Identificador 칰nico de la auditor칤a. Ej: AUD-2025-01, AUD-FINANCIERA-Q1. Se recomienda usar un formato consistente para facilitar b칰squedas y referencias.</p>
                </div>
                
                <div style="background: #fafafa; border-radius: 8px; padding: 10px; font-size: 11px; line-height: 1.5;">
                  <p style="margin: 0 0 6px 0; font-weight: 600;">Nombre de auditor칤a</p>
                  <p style="margin: 0; color: var(--text-muted);">Descripci칩n completa de la auditor칤a. Ej: "Auditor칤a integral de procesos financieros 2025". Proporciona contexto sobre el alcance y objetivo.</p>
                </div>
                
                <div style="background: #fafafa; border-radius: 8px; padding: 10px; font-size: 11px; line-height: 1.5;">
                  <p style="margin: 0 0 6px 0; font-weight: 600;">Auditor l칤der</p>
                  <p style="margin: 0; color: var(--text-muted);">Profesional responsable de la direcci칩n general de la auditor칤a. Se selecciona de la lista de participantes registrados. Solo auditorores e "Auditores l칤deres" pueden ser asignados a este rol.</p>
                </div>
              </div>

              <h4 style="margin: 12px 0 8px 0; color: var(--text-main); font-size: 12px; font-weight: 600;">Acciones disponibles:</h4>
              <ul style="margin: 0; padding-left: 16px; font-size: 11px; line-height: 1.5;">
                <li><strong>Guardar / actualizar:</strong> Consolida los cambios realizados en la auditor칤a actual. Usa esta opci칩n cuando modifiques el c칩digo.</li>
                <li><strong>Descargar JSON:</strong> Exporta toda la informaci칩n (auditor칤as, participantes, etapas, actividades) en formato JSON para respaldos.</li>
                <li><strong>Cargar ejemplo:</strong> Carga una auditor칤a de muestra con datos completos para explorar todas las funcionalidades.</li>
                <li><strong>Cargar JSON:</strong> Importa datos de auditor칤as previas desde un archivo JSON descargado anteriormente.</li>
                <li><strong>Reiniciar:</strong> Recarga la aplicaci칩n eliminando todos los datos actuales (confirma antes de ejecutar).</li>
              </ul>

              <h4 style="margin: 12px 0 8px 0; color: var(--text-main); font-size: 12px; font-weight: 600;">Resumen:</h4>
              <p style="margin: 0 0 8px 0; font-size: 11px; line-height: 1.5;">Muestra un resumen din치mico con el conteo de participantes, etapas, actividades y d칤as del proyecto. Se actualiza autom치ticamente al agregar o modificar informaci칩n.</p>
            </div>

            <!-- Secci칩n Participantes -->
            <div class="help-section" id="help-participantes">
              <h2 style="margin: 0 0 12px 0; color: var(--orange); font-size: 15px;">游논 Participantes</h2>
              <p style="margin: 0 0 10px 0; font-size: 12px; line-height: 1.5;">Registra y gestiona a todos los profesionales involucrados en la auditor칤a. Define sus roles y responsabilidades para una coordinaci칩n clara del equipo.</p>
              
              <h4 style="margin: 12px 0 8px 0; color: var(--text-main); font-size: 12px; font-weight: 600;">Informaci칩n del participante:</h4>
              
              <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-bottom: 12px;">
                <div style="background: #fafafa; border-radius: 8px; padding: 10px; font-size: 11px; line-height: 1.5;">
                  <p style="margin: 0 0 6px 0; font-weight: 600;">Nombre</p>
                  <p style="margin: 0; color: var(--text-muted);">Nombre completo del participante (requerido). Ej: "Ana Mar칤a Torres G칩mez".</p>
                </div>
                
                <div style="background: #fafafa; border-radius: 8px; padding: 10px; font-size: 11px; line-height: 1.5;">
                  <p style="margin: 0 0 6px 0; font-weight: 600;">Correo electr칩nico</p>
                  <p style="margin: 0; color: var(--text-muted);">Correo del participante (opcional). Facilita la comunicaci칩n y documentaci칩n de contactos.</p>
                </div>
                
                <div style="background: #fafafa; border-radius: 8px; padding: 10px; font-size: 11px; line-height: 1.5;">
                  <p style="margin: 0 0 6px 0; font-weight: 600;">Rol</p>
                  <p style="margin: 0; color: var(--text-muted);">Define la funci칩n del participante en la auditor칤a (Auditor l칤der, Auditor, Responsable de proceso, Observador). Los roles pueden personalizarse en "Editar roles".</p>
                </div>
              </div>

              <h4 style="margin: 12px 0 8px 0; color: var(--text-main); font-size: 12px; font-weight: 600;">Descripci칩n de roles est치ndar:</h4>
              <ul style="margin: 0; padding-left: 16px; font-size: 11px; line-height: 1.5;">
                <li><strong>Auditor l칤der:</strong> Dirige la auditor칤a y es responsable de resultados finales.</li>
                <li><strong>Auditor:</strong> Ejecuta procedimientos de auditor칤a bajo supervisi칩n del l칤der.</li>
                <li><strong>Responsable de proceso:</strong> Representa al 치rea auditada, facilita informaci칩n y control.</li>
                <li><strong>Observador:</strong> Participa en reuniones pero sin responsabilidad directa en ejecuci칩n.</li>
              </ul>

              <h4 style="margin: 12px 0 8px 0; color: var(--text-main); font-size: 12px; font-weight: 600;">Operaciones disponibles:</h4>
              <ul style="margin: 0; padding-left: 16px; font-size: 11px; line-height: 1.5;">
                <li><strong>Editar roles:</strong> Personaliza la lista de roles disponibles (modificar etiquetas, agregar nuevos).</li>
                <li><strong>Editar (칤cono l치piz):</strong> Modifica nombre, correo o rol de un participante existente.</li>
                <li><strong>Eliminar (칤cono basurero):</strong> Remueve un participante de la auditor칤a.</li>
              </ul>
            </div>

            <!-- Secci칩n Etapas -->
            <div class="help-section" id="help-etapas">
              <h2 style="margin: 0 0 12px 0; color: var(--orange); font-size: 15px;">游늯 Etapas</h2>
              <p style="margin: 0 0 10px 0; font-size: 12px; line-height: 1.5;">Define las fases principales de la auditor칤a. Cada etapa agrupa actividades relacionadas, documentos y riesgos asociados. Facilita la organizaci칩n y seguimiento de la auditor칤a.</p>
              
              <h4 style="margin: 12px 0 8px 0; color: var(--text-main); font-size: 12px; font-weight: 600;">Componentes de una etapa:</h4>
              
              <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-bottom: 12px;">
                <div style="background: #fafafa; border-radius: 8px; padding: 10px; font-size: 11px; line-height: 1.5;">
                  <p style="margin: 0 0 6px 0; font-weight: 600;">Nombre de etapa</p>
                  <p style="margin: 0; color: var(--text-muted);">Descripci칩n clara de la fase. Ej: "Revisi칩n de documentaci칩n financiera", "Pruebas de control interno", "Informe y cierre".</p>
                </div>
                
                <div style="background: #fafafa; border-radius: 8px; padding: 10px; font-size: 11px; line-height: 1.5;">
                  <p style="margin: 0 0 6px 0; font-weight: 600;">Nivel de riesgo</p>
                  <p style="margin: 0; color: var(--text-muted);"><strong>Bajo:</strong> Procesos estables con controles maduros. <strong>Medio:</strong> Procesos con algunos riesgos a monitorear. <strong>Alto:</strong> Procesos con riesgos significativos o cambios importantes.</p>
                </div>
                
                <div style="background: #fafafa; border-radius: 8px; padding: 10px; font-size: 11px; line-height: 1.5;">
                  <p style="margin: 0 0 6px 0; font-weight: 600;">Fechas (inicio y fin)</p>
                  <p style="margin: 0; color: var(--text-muted);">Per칤odo programado para la ejecuci칩n de la etapa. Estas fechas se reflejan en el diagrama de Gantt para visualizar la cronolog칤a general.</p>
                </div>
                
                <div style="background: #fafafa; border-radius: 8px; padding: 10px; font-size: 11px; line-height: 1.5;">
                  <p style="margin: 0 0 6px 0; font-weight: 600;">Adjuntos</p>
                  <p style="margin: 0; color: var(--text-muted);">Documentos asociados (PDF, Excel, Word, etc.). Se registran los nombres de los archivos para referencia r치pida durante la auditor칤a.</p>
                </div>
              </div>

              <h4 style="margin: 12px 0 8px 0; color: var(--text-main); font-size: 12px; font-weight: 600;">Actividades dentro de etapas:</h4>
              <p style="margin: 0 0 8px 0; font-size: 11px; line-height: 1.5;">Cada etapa puede contener m칰ltiples actividades (tareas espec칤ficas). Las actividades heredan el contexto de la etapa padre y pueden tener fechas propias m치s detalladas.</p>
              
              <h4 style="margin: 12px 0 8px 0; color: var(--text-main); font-size: 12px; font-weight: 600;">Operaciones disponibles:</h4>
              <ul style="margin: 0; padding-left: 16px; font-size: 11px; line-height: 1.5;">
                <li><strong>Editar etapa:</strong> Modifica nombre, riesgo o fechas de la etapa principal.</li>
                <li><strong>Eliminar etapa:</strong> Remueve la etapa y todas sus actividades (confirma esta acci칩n).</li>
                <li><strong>Agregar actividad:</strong> Crea una nueva tarea dentro de la etapa con su propia cronolog칤a.</li>
                <li><strong>Editar actividad (칤cono l치piz):</strong> Modifica nombre, fechas o descripci칩n de la actividad.</li>
                <li><strong>Eliminar actividad (칤cono basurero):</strong> Remueve la actividad de la etapa.</li>
              </ul>
            </div>

            <!-- Secci칩n Calendario -->
            <div class="help-section" id="help-calendario">
              <h2 style="margin: 0 0 12px 0; color: var(--orange); font-size: 15px;">游늰 Calendario</h2>
              <p style="margin: 0 0 10px 0; font-size: 12px; line-height: 1.5;">Visualiza y programa las fechas de todas tus etapas y actividades en un formato de columnas. Facilita la asignaci칩n de cronogramas y evita conflictos de fechas.</p>
              
              <h4 style="margin: 12px 0 8px 0; color: var(--text-main); font-size: 12px; font-weight: 600;">C칩mo usar el Calendario:</h4>
              
              <div style="background: #fffbf0; border-left: 3px solid var(--orange); padding: 10px; border-radius: 6px; font-size: 11px; margin-bottom: 10px; line-height: 1.5;">
                <p style="margin: 0 0 6px 0; font-weight: 600;">Estructura por columnas</p>
                <p style="margin: 0; color: var(--text-muted);">Cada columna representa una etapa. Dentro de cada columna, encuentras campos para asignar fecha de inicio y fin de la etapa, seguidos por las actividades relacionadas con sus propias fechas.</p>
              </div>

              <div style="background: #fffbf0; border-left: 3px solid var(--orange); padding: 10px; border-radius: 6px; font-size: 11px; margin-bottom: 10px; line-height: 1.5;">
                <p style="margin: 0 0 6px 0; font-weight: 600;">Ingresar fechas</p>
                <p style="margin: 0; color: var(--text-muted);">Haz clic en los campos de fecha (inicio/fin) para abrir un selector de calendario. Selecciona el rango que corresponda a tu plan de auditor칤a. Los cambios se guardan autom치ticamente.</p>
              </div>

              <div style="background: #fffbf0; border-left: 3px solid var(--orange); padding: 10px; border-radius: 6px; font-size: 11px; margin-bottom: 10px; line-height: 1.5;">
                <p style="margin: 0 0 6px 0; font-weight: 600;">Sincronizaci칩n con otras vistas</p>
                <p style="margin: 0; color: var(--text-muted);">Las fechas ingresadas en el Calendario se sincronizan autom치ticamente con la secci칩n Etapas y se reflejan en el diagrama de Gantt en tiempo real.</p>
              </div>

              <h4 style="margin: 12px 0 8px 0; color: var(--text-main); font-size: 12px; font-weight: 600;">Consejos:</h4>
              <ul style="margin: 0; padding-left: 16px; font-size: 11px; line-height: 1.5;">
                <li>Programa etapas en secuencia l칩gica respetando dependencias.</li>
                <li>Asigna actividades dentro de ventanas de tiempo realistas.</li>
                <li>Incluye buffer de tiempo entre etapas para revisiones y ajustes.</li>
                <li>Actualiza fechas regularmente si el cronograma cambia.</li>
              </ul>
            </div>

            <!-- Secci칩n Diagrama -->
            <div class="help-section" id="help-diagrama">
              <h2 style="margin: 0 0 12px 0; color: var(--orange); font-size: 15px;">游늵 Diagrama (Gantt)</h2>
              <p style="margin: 0 0 10px 0; font-size: 12px; line-height: 1.5;">Visualiza gr치ficamente la cronolog칤a completa de la auditor칤a mediante un diagrama de Gantt. Muestra la duraci칩n de etapas y actividades, facilitando el seguimiento del avance y la identificaci칩n de solapamientos.</p>
              
              <h4 style="margin: 12px 0 8px 0; color: var(--text-main); font-size: 12px; font-weight: 600;">Componentes y lectura:</h4>
              
              <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-bottom: 12px;">
                <div style="background: #fafafa; border-radius: 8px; padding: 10px; font-size: 11px; line-height: 1.5;">
                  <p style="margin: 0 0 6px 0; font-weight: 600;">Componentes del diagrama</p>
                  <p style="margin: 0 0 6px 0; color: var(--text-muted);"><strong>Barras de etapas (naranja oscuro):</strong> Representan la duraci칩n completa de cada etapa desde su fecha de inicio hasta su fecha de fin.</p>
                  <p style="margin: 0; color: var(--text-muted);"><strong>Barras de actividades (verde):</strong> Representan tareas espec칤ficas dentro de etapas. Son m치s finas que las etapas y se superponen dentro del tiempo de la etapa padre.</p>
                </div>

                <div style="background: #fafafa; border-radius: 8px; padding: 10px; font-size: 11px; line-height: 1.5;">
                  <p style="margin: 0 0 6px 0; font-weight: 600;">Lectura del diagrama</p>
                  <ul style="margin: 0; padding-left: 12px; font-size: 11px; line-height: 1.5;">
                    <li><strong>Eje horizontal:</strong> L칤nea de tiempo (d칤as del proyecto).</li>
                    <li><strong>Eje vertical:</strong> Listado de etapas y sus actividades.</li>
                    <li><strong>Largo de barra:</strong> Indica la duraci칩n de la etapa o actividad.</li>
                    <li><strong>Posici칩n:</strong> Indica el momento de inicio del elemento.</li>
                  </ul>
                </div>

                <div style="background: #fafafa; border-radius: 8px; padding: 10px; font-size: 11px; line-height: 1.5;">
                  <p style="margin: 0 0 6px 0; font-weight: 600;">Interpretaci칩n de patrones</p>
                  <ul style="margin: 0; padding-left: 12px; font-size: 11px; line-height: 1.5;">
                    <li><strong>Barras solapadas:</strong> Actividades simult치neas (recursos paralelos).</li>
                    <li><strong>Barras secuenciales:</strong> Actividades en orden (dependencia clara).</li>
                    <li><strong>Espacios vac칤os:</strong> Per칤odos sin actividades (pueden ser deliberados).</li>
                  </ul>
                </div>
              </div>

              <h4 style="margin: 12px 0 8px 0; color: var(--text-main); font-size: 12px; font-weight: 600;">Exportar a PDF:</h4>
              <p style="margin: 0 0 8px 0; font-size: 11px; line-height: 1.5;">El bot칩n "Descargar Informe en PDF" genera un documento completo que incluye datos generales, listado de participantes, definici칩n de etapas y el diagrama de Gantt. Es 칰til para presentar a stakeholders o mantener registro formal de la planificaci칩n.</p>
            </div>

            <!-- Secci칩n Ejemplo -->
            <div class="help-section" id="help-example">
              <h2 style="margin: 0 0 12px 0; color: var(--orange); font-size: 15px;">Ejemplo pr치ctico</h2>
              <p style="margin: 0 0 10px 0; font-size: 12px; line-height: 1.5;">A continuaci칩n, un caso de uso completo que ilustra c칩mo utilizar todas las funcionalidades de AuditorMonitor de forma integrada.</p>
              
              <h4 style="margin: 12px 0 8px 0; color: var(--text-main); font-size: 12px; font-weight: 600;">Escenario: Auditor칤a financiera integral 2025</h4>
              
              <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-bottom: 12px;">
                <div style="background: #fffbf0; border-left: 3px solid var(--orange); padding: 10px; border-radius: 6px; font-size: 11px; line-height: 1.5;">
                  <p style="margin: 0 0 6px 0; font-weight: 600;">1. Datos generales</p>
                  <p style="margin: 0;"><strong>C칩digo:</strong> AUD-2025-FIN-01<br/><strong>Nombre:</strong> Auditor칤a integral de procesos financieros y contables 2025<br/><strong>Auditor l칤der:</strong> Ana Torres</p>
                </div>

                <div style="background: #fffbf0; border-left: 3px solid var(--orange); padding: 10px; border-radius: 6px; font-size: 11px; line-height: 1.5;">
                  <p style="margin: 0 0 6px 0; font-weight: 600;">2. Equipo de participantes</p>
                  <ul style="margin: 0; padding-left: 16px; font-size: 10px;">
                    <li>Ana Torres (Auditor l칤der)</li>
                    <li>Luis P칠rez (Auditor)</li>
                    <li>Mar칤a G칩mez (Responsable)</li>
                    <li>Carlos Rivas (Responsable)</li>
                    <li>Elena N칰침ez (Observadora)</li>
                  </ul>
                </div>

                <div style="background: #fffbf0; border-left: 3px solid var(--orange); padding: 10px; border-radius: 6px; font-size: 11px; line-height: 1.5;">
                  <p style="margin: 0 0 6px 0; font-weight: 600;">3-5. Etapas, documentos y monitoreo</p>
                  <p style="margin: 0 0 4px 0; font-size: 10px;"><strong>4 etapas:</strong> Planeaci칩n (bajo), Revisi칩n documentos (alto), Pruebas (medio), Informe (medio)</p>
                  <p style="margin: 0 0 4px 0; font-size: 10px;"><strong>Documentos:</strong> PDF, Excel, Word por etapa</p>
                  <p style="margin: 0; font-size: 10px;"><strong>Monitoreo:</strong> Ajusta fechas en Calendario y descarga informe PDF cuando est칠 lista la planificaci칩n.</p>
                </div>
              </div>
            </div>

            <!-- Secci칩n Consejos -->
            <div class="help-section" id="help-tips">
              <h2 style="margin: 0 0 12px 0; color: var(--orange); font-size: 15px;">Consejos y mejores pr치cticas</h2>
              <p style="margin: 0 0 10px 0; font-size: 12px; line-height: 1.5;">Recomendaciones para aprovechar al m치ximo AuditorMonitor y garantizar auditor칤as bien organizadas y documentadas.</p>
              
              <h4 style="margin: 12px 0 8px 0; color: var(--text-main); font-size: 12px; font-weight: 600;">Gesti칩n de datos:</h4>
              <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-bottom: 12px;">
                <div style="background: #fafafa; border-radius: 8px; padding: 10px; font-size: 11px; line-height: 1.5;">
                  <p style="margin: 0 0 6px 0; font-weight: 600;">Respaldos regulares</p>
                  <p style="margin: 0; color: var(--text-muted);">Descarga archivos JSON semanalmente para evitar p칠rdida de informaci칩n.</p>
                </div>
                <div style="background: #fafafa; border-radius: 8px; padding: 10px; font-size: 11px; line-height: 1.5;">
                  <p style="margin: 0 0 6px 0; font-weight: 600;">C칩digos descriptivos</p>
                  <p style="margin: 0; color: var(--text-muted);">Usa formatos consistentes como AUD-AAAA-TIPO-NUM para f치cil identificaci칩n.</p>
                </div>
                <div style="background: #fafafa; border-radius: 8px; padding: 10px; font-size: 11px; line-height: 1.5;">
                  <p style="margin: 0 0 6px 0; font-weight: 600;">Actualizaci칩n constante</p>
                  <p style="margin: 0; color: var(--text-muted);">Mant칠n fechas y participantes sincronizados con cambios reales en el proyecto.</p>
                </div>
              </div>

              <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-bottom: 12px;">
                <div style="background: #fafafa; border-radius: 8px; padding: 10px; font-size: 11px; line-height: 1.5;">
                  <p style="margin: 0 0 6px 0; font-weight: 600;">Planificaci칩n</p>
                  <ul style="margin: 0; padding-left: 16px;">
                    <li><strong>Auditor l칤der:</strong> Asigna siempre un auditor l칤der claramente identificado antes de comenzar.</li>
                    <li><strong>Roles claros:</strong> Define roles espec칤ficos para cada participante para evitar duplicidad.</li>
                    <li><strong>Tiempo realista:</strong> No congestes el cronograma; incluye tiempo para revisiones y ajustes.</li>
                    <li><strong>Riesgos identificados:</strong> Usa la clasificaci칩n de riesgos para priorizar etapas cr칤ticas.</li>
                  </ul>
                </div>

                <div style="background: #fafafa; border-radius: 8px; padding: 10px; font-size: 11px; line-height: 1.5;">
                  <p style="margin: 0 0 6px 0; font-weight: 600;">Documentaci칩n</p>
                  <ul style="margin: 0; padding-left: 16px;">
                    <li><strong>Adjuntos organizados:</strong> Carga documentos relacionados a su etapa correspondiente para referencia r치pida.</li>
                    <li><strong>Descripciones en actividades:</strong> Agrega breves descripciones que aclaren el prop칩sito de cada actividad.</li>
                    <li><strong>Exporta PDF:</strong> Genera reportes PDF cuando la planificaci칩n sea aprobada como documento de control.</li>
                  </ul>
                </div>

                <div style="background: #fafafa; border-radius: 8px; padding: 10px; font-size: 11px; line-height: 1.5;">
                  <p style="margin: 0 0 6px 0; font-weight: 600;">Seguimiento</p>
                  <ul style="margin: 0; padding-left: 16px;">
                    <li><strong>Gantt como referencia:</strong> Revisa el diagrama regularmente para identificar desviaciones al cronograma.</li>
                    <li><strong>Ajustes 치giles:</strong> Modifica fechas en el Calendario en tiempo real si emergen cambios.</li>
                    <li><strong>Participantes informados:</strong> Mant칠n contacto de correos actualizados para comunicaciones efectivas.</li>
                    <li><strong>Hitos importantes:</strong> Marca claramente las fechas de cierre de cada etapa para monitoreo.</li>
                  </ul>
                </div>
              </div>

              <h4 style="margin: 12px 0 8px 0; color: var(--text-main); font-size: 12px; font-weight: 600;">Personalizaci칩n de roles:</h4>
              <p style="margin: 0 0 8px 0; font-size: 11px; line-height: 1.5;">Si los roles est치ndar no se ajustan a tu estructura organizacional, usa "Editar roles" en Participantes para crear roles personalizados espec칤ficos de tu contexto (ej: "Especialista t칠cnico", "Coordinador de auditor칤a", etc.).</p>

              <div style="background: #e8f5e9; border-left: 3px solid #43a047; padding: 10px; border-radius: 6px; font-size: 11px; margin-top: 12px; line-height: 1.5;">
                <p style="margin: 0; font-weight: 600;">游눠 Tip final:</p>
                <p style="margin: 0; color: #333;">Carga el ejemplo de datos proporcionado ("Cargar ejemplo") para explorar todas las funcionalidades en contexto real. Esto te familiarizar치 r치pidamente con la plataforma.</p>
              </div>
            </div>

            <p style="margin-top: 16px; padding-top: 12px; border-top: 1px solid #ddd; font-size: 9px; text-align: center; color: #666; margin-bottom: 8px;">춸 2025 AuditorMonitor | Carlos Alfredo Castillo Flores - ITCPO | Todos los derechos reservados</p>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Modal gen칠rico per messaggi e cattura testo -->
  <div id="app-modal-backdrop" class="modal-backdrop hidden">
    <div class="modal">
      <div class="modal-title" id="modal-title"></div>
      <div class="modal-message" id="modal-message"></div>
      <div class="modal-input-wrapper hidden" id="modal-input-wrapper">
        <input id="modal-input" class="field-input" type="text" />
      </div>
      <div class="modal-actions">
        <button id="modal-cancel" class="btn-chip">Cancelar</button>
        <button id="modal-ok" class="btn-primary">Aceptar</button>
      </div>
    </div>
  </div>
</body>
</html>

